name: tiscamera
modules:

- name: libzip
  buildsystem: cmake-ninja
  cleanup:
    - "/include"
    - "/bin"
    - "/share"
    - "*.la"
  sources:
    - type: archive
      url: https://libzip.org/download/libzip-1.11.4.tar.xz
      sha256: 8a247f57d1e3e6f6d11413b12a6f28a9d388de110adc0ec608d893180ed7097b

- name: tiscamera
  buildsystem: cmake-ninja
  builddir: true
  config-opts:
    - -DCMAKE_POLICY_VERSION_MINIMUM=3.5
    - -DTCAM_INSTALL_FORCE_PREFIX=ON
    - -DTCAM_INSTALL_UDEV=/app/lib/udev
    - -DTCAM_INSTALL_SYSTEMD=/app/lib/systemd/system/
    - -DTCAM_BUILD_WITH_GUI=OFF
    - -DTCAM_BUILD_DOCUMENTATION=OFF
    - -DTCAM_DOWNLOAD_MESON=OFF
    - -DTCAM_INTERNAL_ARAVIS=OFF
    - -Daravis_INCLUDE_DIR=/app/include/aravis-0.8
    - -DGOBJECT_INTROSPECTION_1.0_GIRDIR=/app/share/gir-1.0/
    - -DGOBJECT_INTROSPECTION_1.0_TYPELIBDIR=/app/lib/girepository-1.0
    - -DGSTREAMER_1.0_PLUGINSDIR=/app/lib/gstreamer-1.0
    - -DGSTREAMER_1.0_INCLUDEDIR=/app/include/gstreamer-1.0
  sources:
    - type: git
      url: https://github.com/TheImagingSource/tiscamera.git
      commit: a0ece27ef145596fe356f0bfdb41547ea4a7604e
